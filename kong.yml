_format_version: "2.1"
services:
  - name: fastapi-service
    url: http://app:8080
    routes:
      - name: fastapi-route
        paths:
          - /
        methods: ["GET", "POST"]
        strip_path: false
    plugins:
      - name: key-auth
        config:
          key_names: ["api_key"]
          hide_credentials: true

consumers:
  - username: test-user
    credentials:
      - key-auth:
          key: "${KONG_API_KEY}"